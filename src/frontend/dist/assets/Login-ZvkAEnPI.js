import{d as N,r as u,i as y,u as M,s as I,a as j,o,c as l,b as s,n as w,t as d,e as z,w as h,f as S,v as x,F as V,g as p,h as b,j as D,k as A,l as C,p as J,m as O,_ as P,q as R}from"./index-ovc9-s1E.js";import{_ as E}from"./logoPrincipal-owaQzuwk.js";const $=c=>(J("data-v-4f0661de"),c=c(),O(),c),G={class:"home"},H={id:"login"},K={class:"info_version"},Q=$(()=>s("div",{class:"logo_sia"},[s("img",{src:E,style:{width:"100%"},alt:"SIA"})],-1)),W={style:{display:"grid","grid-template-columns":"1fr 1fr","grid-gap":"10px","text-align":"left!important"}},X=$(()=>s("span",{class:"border-sm",role:"status","aria-hidden":"true"},[s("i",{class:"bi bi-envelope"}),b(" Access token via email")],-1)),Y=[X],Z=$(()=>s("span",{class:"border-sm",role:"status","aria-hidden":"true"},[s("i",{class:"bi bi-chat-left"}),b(" Access token via SMS")],-1)),ee=[Z],se={type:"submit",class:"btn login"},ae={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},te={key:1,class:"info-section"},oe={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},ne={key:3,class:"info-error"},le=N({__name:"Login",setup(c){const a=u(!1),r=u(1),i=u(!1),m=u(""),_=u(""),k=u(""),v=u("");y("message"),y("porom");const T=y("app_version"),U=M(),{logged:g}=I(U),q=j(),{token:f}=I(q),B=()=>{const t={username:m.value,password:_.value,auth_selection:r.value};i.value=!0,v.value="",A.post("/api/management/access/",t).then(e=>{e.data.message?(e.data.message=="credentials_incorrect"||e.data.message=="something_wrong"||e.message=="contact_phone_invalid"?v.value=e.data.message:a.value=!0,i.value=!1):(g.value=!0,f.value=e.data.token,C.push({name:"Users"}))}).catch(e=>{g.value=!1,f.value="",i.value=!1,console.log(e.toJSON())})};function L(){C.push({name:"RecoverPassword"})}function F(){const t={username:m.value,password:_.value,token:k.value};A.post("/api/management/validate2FA/",t).then(e=>{debugger;e.data.message?(e.data.message=="credentials_incorrect"||e.data.message=="something_wrong"?v.value=e.data.message:a.value=!0,i.value=!1):(g.value=!0,f.value=e.data.token,C.push({name:"users"}))}).catch(e=>{g.value=!1,f.value="",i.value=!1,console.log(e.toJSON())})}return(t,e)=>(o(),l("div",G,[s("section",H,[s("div",{class:w(["login-white-square",{large_square:a.value,medium_square:!a.value}])},[s("div",K,[s("b",null,d(z(T)),1)]),s("form",{onSubmit:h(B,["prevent"])},[Q,S(s("input",{type:"text",class:"mt-0","onUpdate:modelValue":e[0]||(e[0]=n=>m.value=n),autocomplete:"off",name:"username",placeholder:"Username"},null,512),[[x,m.value]]),S(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=n=>_.value=n),autocomplete:"off",name:"password",maxlength:"40",placeholder:"Password"},null,512),[[x,_.value]]),a.value?(o(),l("div",te,d(t.$t("check_your_inbox")),1)):(o(),l(V,{key:0},[s("div",W,[s("button",{class:w(["btn",[r.value==1?"auth-selected":"auth-unselected"]]),onClick:e[2]||(e[2]=h(n=>{r.value=1},["prevent"]))},Y,2),s("button",{class:w(["btn",[r.value==2?"auth-selected":"auth-unselected"]]),onClick:e[3]||(e[3]=h(n=>{r.value=2},["prevent"]))},ee,2)]),s("button",se,[i.value?(o(),l("span",ae)):p("",!0),b(" "+d(t.$t("login")),1)])],64)),a.value?(o(),l(V,{key:2},[S(s("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=n=>k.value=n),placeholder:"Access Code",maxlength:"50","aria-describedby":"code-feedback",style:D({opacity:a.value?1:.5})},null,4),[[x,k.value]]),a.value?(o(),l("button",{key:0,type:"button",class:"btn login",onClick:F},[i.value?(o(),l("span",oe)):p("",!0),b(" "+d(t.$t("validate_code")),1)])):p("",!0)],64)):p("",!0),s("span",{class:"select-pointer",onClick:e[5]||(e[5]=h(n=>L(),["stop"]))},d(t.$t("forgot_password")),1),v.value?(o(),l("div",ne,[s("p",null,d(t.$t(v.value)),1)])):p("",!0)],32)],2)])]))}}),ie=P(le,[["__scopeId","data-v-4f0661de"]]),de=N({__name:"Login",setup(c){return(a,r)=>(o(),R(ie))}});export{de as default};
